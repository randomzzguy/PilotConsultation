<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marine Services Request Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(-45deg, #0a2a43, #1e40af, #0369a1, #0c4a6e);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .floating-elements::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.1) 0%, transparent 70%);
            animation: float 20s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }
        
        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(30px, -30px) rotate(120deg); }
            66% { transform: translate(-20px, 20px) rotate(240deg); }
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            position: relative;
            z-index: 10;
        }
        
        .header-glow {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.7));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 10;
        }
        
        .step-transition {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .progress-step {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .progress-step::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .progress-step.active {
            background: linear-gradient(135deg, #0a2a43, #1e40af);
            color: white;
            box-shadow: 0 8px 25px -8px rgba(10, 42, 67, 0.5);
            transform: scale(1.1);
        }
        
        .progress-step.active::before {
            left: 100%;
        }
        
        .progress-step.completed {
            background: linear-gradient(135deg, #059669, #10b981);
            color: white;
            box-shadow: 0 8px 25px -8px rgba(5, 150, 105, 0.4);
        }
        
        .progress-line {
            height: 2px;
            background: rgba(229, 231, 235, 0.6);
            margin: 0 1rem;
            flex: 1;
            border-radius: 1px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-line::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, #0a2a43, #1e40af);
            width: 0%;
            transition: width 0.6s ease;
        }
        
        .input-glow {
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .input-glow:focus {
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1), 0 0 20px rgba(59, 130, 246, 0.2);
            border-color: #3b82f6;
            transform: translateY(-1px);
            background: rgba(255, 255, 255, 1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #0a2a43, #1e40af);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px -5px rgba(10, 42, 67, 0.4);
        }
        
        .btn-primary:hover::before {
            left: 100%;
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            color: white;
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }
        
        .drag-zone {
            border: 2px dashed rgba(203, 213, 225, 0.6);
            transition: all 0.4s ease;
            background: rgba(248, 250, 252, 0.5);
            backdrop-filter: blur(10px);
        }
        
        .drag-zone.drag-over {
            border-color: #0a2a43;
            background: rgba(59, 130, 246, 0.1);
            transform: scale(1.02);
            box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.2);
        }
        
        .file-item {
            animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(249, 250, 251, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .fade-in {
            animation: fadeIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes fadeIn {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .service-option {
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .service-option:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .service-option.selected {
            background: linear-gradient(135deg, rgba(10, 42, 67, 0.1), rgba(30, 64, 175, 0.1));
            border-color: #0a2a43;
            box-shadow: 0 8px 25px -8px rgba(10, 42, 67, 0.3);
        }
        
        .summary-card {
            background: linear-gradient(135deg, rgba(249, 250, 251, 0.9), rgba(243, 244, 246, 0.9));
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.4);
        }
        
        .step-title {
            background: linear-gradient(135deg, #0a2a43, #1e40af);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
    </style>
</head>
<body class="min-h-screen py-8 px-4 floating-elements relative">
    <div class="max-w-2xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8 header-glow rounded-2xl p-6">
            <h1 class="text-4xl font-bold text-gray-900 mb-2 step-title">Marine Services Request</h1>
            <p class="text-gray-600 text-lg">Professional marine consultation and inspection services</p>
        </div>

        <!-- Progress Indicator -->
        <div class="mb-8">
            <div class="flex justify-between items-center">
                <div class="flex items-center w-full">
                    <div class="progress-step active w-12 h-12 rounded-full flex items-center justify-center text-sm font-semibold bg-gray-200 text-gray-600" data-step="1">1</div>
                    <div class="progress-line"></div>
                    <div class="progress-step w-12 h-12 rounded-full flex items-center justify-center text-sm font-semibold bg-gray-200 text-gray-600" data-step="2">2</div>
                    <div class="progress-line"></div>
                    <div class="progress-step w-12 h-12 rounded-full flex items-center justify-center text-sm font-semibold bg-gray-200 text-gray-600" data-step="3">3</div>
                    <div class="progress-line"></div>
                    <div class="progress-step w-12 h-12 rounded-full flex items-center justify-center text-sm font-semibold bg-gray-200 text-gray-600" data-step="4">4</div>
                    <div class="progress-line"></div>
                    <div class="progress-step w-12 h-12 rounded-full flex items-center justify-center text-sm font-semibold bg-gray-200 text-gray-600" data-step="5">5</div>
                    <div class="progress-line"></div>
                    <div class="progress-step w-12 h-12 rounded-full flex items-center justify-center text-sm font-semibold bg-gray-200 text-gray-600" data-step="6">6</div>
                </div>
            </div>
            <div class="mt-4 text-center">
                <span id="step-label" class="text-lg font-medium text-white bg-black bg-opacity-20 px-4 py-2 rounded-full backdrop-blur-sm">Contact Information</span>
            </div>
        </div>

        <!-- Form Container -->
        <div class="glass-card rounded-2xl p-8">
            <form id="marineForm">
                <!-- Step 1: Contact Info -->
                <div id="step-1" class="step-content fade-in">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-8 step-title">Contact Information</h2>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Full Name *</label>
                            <input type="text" id="fullName" required class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Email Address *</label>
                            <input type="email" id="email" required class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Phone Number</label>
                            <input type="tel" id="phone" class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Company</label>
                            <input type="text" id="company" class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                    </div>
                </div>

                <!-- Step 2: Service Type -->
                <div id="step-2" class="step-content hidden">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-8 step-title">Select Service Type</h2>
                    
                    <div class="space-y-4">
                        <label class="service-option flex items-center p-5 rounded-xl cursor-pointer">
                            <input type="radio" name="serviceType" value="mws" class="mr-4 text-blue-600 w-5 h-5">
                            <span class="font-medium text-lg">Marine Warranty Survey (MWS)</span>
                        </label>
                        
                        <label class="service-option flex items-center p-5 rounded-xl cursor-pointer">
                            <input type="radio" name="serviceType" value="diving" class="mr-4 text-blue-600 w-5 h-5">
                            <span class="font-medium text-lg">Diving Inspection Services</span>
                        </label>
                        
                        <label class="service-option flex items-center p-5 rounded-xl cursor-pointer">
                            <input type="radio" name="serviceType" value="vessel" class="mr-4 text-blue-600 w-5 h-5">
                            <span class="font-medium text-lg">Vessel Assurance / IMCA eCMID</span>
                        </label>
                        
                        <label class="service-option flex items-center p-5 rounded-xl cursor-pointer">
                            <input type="radio" name="serviceType" value="rov" class="mr-4 text-blue-600 w-5 h-5">
                            <span class="font-medium text-lg">ROV / NDT Inspection</span>
                        </label>
                        
                        <label class="service-option flex items-center p-5 rounded-xl cursor-pointer">
                            <input type="radio" name="serviceType" value="audit" class="mr-4 text-blue-600 w-5 h-5">
                            <span class="font-medium text-lg">Audit & Risk Assessment</span>
                        </label>
                        
                        <label class="service-option flex items-center p-5 rounded-xl cursor-pointer">
                            <input type="radio" name="serviceType" value="other" class="mr-4 text-blue-600 w-5 h-5">
                            <span class="font-medium text-lg">Other</span>
                        </label>
                        
                        <div id="otherServiceInput" class="hidden mt-4">
                            <input type="text" id="otherService" placeholder="Please specify..." class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                    </div>
                </div>

                <!-- Step 3: Dynamic Fields -->
                <div id="step-3" class="step-content hidden">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-8 step-title">Service Details</h2>
                    
                    <!-- MWS Fields -->
                    <div id="mws-fields" class="service-fields hidden space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Vessel Type</label>
                            <select class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                                <option value="">Select vessel type...</option>
                                <option value="cargo">Cargo Vessel</option>
                                <option value="tanker">Tanker</option>
                                <option value="offshore">Offshore Vessel</option>
                                <option value="passenger">Passenger Vessel</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Operation Type</label>
                            <input type="text" class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Estimated Dates</label>
                            <input type="date" class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                    </div>

                    <!-- Diving Fields -->
                    <div id="diving-fields" class="service-fields hidden space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Inspection Scope</label>
                            <textarea class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" rows="4"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Vessel Size/Structure</label>
                            <input type="text" class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Preferred Location</label>
                            <input type="text" class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                    </div>

                    <!-- Vessel Assurance Fields -->
                    <div id="vessel-fields" class="service-fields hidden space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Vessel Name & IMO Number</label>
                            <input type="text" class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Inspection Type</label>
                            <select class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                                <option value="">Select inspection type...</option>
                                <option value="annual">Annual Inspection</option>
                                <option value="intermediate">Intermediate Inspection</option>
                                <option value="renewal">Renewal Inspection</option>
                                <option value="additional">Additional Inspection</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Required Date</label>
                            <input type="date" class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                    </div>

                    <!-- ROV Fields -->
                    <div id="rov-fields" class="service-fields hidden space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Inspection Type</label>
                            <select class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                                <option value="">Select inspection type...</option>
                                <option value="hull">Hull Inspection</option>
                                <option value="propeller">Propeller Inspection</option>
                                <option value="underwater">Underwater Structure</option>
                                <option value="ndt">NDT Testing</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Depth/Environment</label>
                            <input type="text" placeholder="e.g., 30m depth, harbor conditions" class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                    </div>

                    <!-- Audit Fields -->
                    <div id="audit-fields" class="service-fields hidden space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Audit Scope</label>
                            <textarea class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" rows="4"></textarea>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Location</label>
                            <input type="text" class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">Timeline</label>
                            <input type="text" placeholder="e.g., 2-3 weeks" class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all">
                        </div>
                    </div>
                </div>

                <!-- Step 4: File Upload -->
                <div id="step-4" class="step-content hidden">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-8 step-title">Upload Documents</h2>
                    
                    <div class="drag-zone p-10 text-center rounded-2xl cursor-pointer" id="dropZone">
                        <svg class="mx-auto h-16 w-16 text-gray-400 mb-6" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                            <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                        <p class="text-xl font-medium text-gray-900 mb-3">Drop files here or click to browse</p>
                        <p class="text-gray-500">PDF, DOCX, JPG, PNG (max 20MB)</p>
                        <input type="file" id="fileInput" multiple accept=".pdf,.docx,.jpg,.jpeg,.png" class="hidden">
                    </div>
                    
                    <div id="fileList" class="mt-6 space-y-3"></div>
                </div>

                <!-- Step 5: Notes -->
                <div id="step-5" class="step-content hidden">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-8 step-title">Additional Notes</h2>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-3">Project Details & Special Requirements</label>
                        <textarea id="notes" rows="8" class="input-glow w-full px-4 py-4 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" placeholder="Please provide any additional information about your project, specific requirements, timeline constraints, or questions you may have..."></textarea>
                    </div>
                </div>

                <!-- Step 6: Confirmation -->
                <div id="step-6" class="step-content hidden">
                    <h2 class="text-2xl font-semibold text-gray-900 mb-8 step-title">Review & Submit</h2>
                    
                    <div class="summary-card rounded-2xl p-8 mb-8">
                        <h3 class="font-semibold text-gray-900 mb-6 text-lg">Request Summary</h3>
                        <div id="summaryContent" class="space-y-3 text-gray-600"></div>
                    </div>
                    
                    <div class="mb-8">
                        <label class="flex items-start service-option p-4 rounded-xl cursor-pointer">
                            <input type="checkbox" id="callbackRequest" class="mt-1 mr-4 text-blue-600 w-5 h-5">
                            <span class="text-gray-700">I would like to request a call back to discuss this project in detail</span>
                        </label>
                    </div>
                </div>

                <!-- Navigation Buttons -->
                <div class="flex justify-between mt-10 pt-8 border-t border-gray-200">
                    <button type="button" id="prevBtn" class="btn-secondary px-8 py-4 rounded-xl font-medium hidden">Previous</button>
                    <div class="flex-1"></div>
                    <button type="button" id="nextBtn" class="btn-primary px-10 py-4 text-white rounded-xl font-medium">Next</button>
                    <button type="submit" id="submitBtn" class="btn-primary px-10 py-4 text-white rounded-xl font-medium hidden">Request Consultation</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 6;
        const uploadedFiles = [];

        const stepLabels = {
            1: 'Contact Information',
            2: 'Service Selection',
            3: 'Service Details',
            4: 'Document Upload',
            5: 'Additional Notes',
            6: 'Review & Submit'
        };

        // Initialize form
        document.addEventListener('DOMContentLoaded', function() {
            updateStepDisplay();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Navigation buttons
            document.getElementById('nextBtn').addEventListener('click', nextStep);
            document.getElementById('prevBtn').addEventListener('click', prevStep);
            document.getElementById('submitBtn').addEventListener('click', submitForm);

            // Service type selection
            document.querySelectorAll('input[name="serviceType"]').forEach(radio => {
                radio.addEventListener('change', handleServiceTypeChange);
            });

            // Service option styling
            document.querySelectorAll('input[name="serviceType"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    document.querySelectorAll('.service-option').forEach(option => {
                        option.classList.remove('selected');
                    });
                    if (this.checked) {
                        this.closest('.service-option').classList.add('selected');
                    }
                });
            });

            // File upload
            const dropZone = document.getElementById('dropZone');
            const fileInput = document.getElementById('fileInput');

            dropZone.addEventListener('click', () => fileInput.click());
            dropZone.addEventListener('dragover', handleDragOver);
            dropZone.addEventListener('dragleave', handleDragLeave);
            dropZone.addEventListener('drop', handleDrop);
            fileInput.addEventListener('change', handleFileSelect);
        }

        function nextStep() {
            if (validateCurrentStep()) {
                if (currentStep < totalSteps) {
                    currentStep++;
                    updateStepDisplay();
                }
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepDisplay();
            }
        }

        function updateStepDisplay() {
            // Hide all steps
            document.querySelectorAll('.step-content').forEach(step => {
                step.classList.add('hidden');
            });

            // Show current step
            document.getElementById(`step-${currentStep}`).classList.remove('hidden');
            document.getElementById(`step-${currentStep}`).classList.add('fade-in');

            // Update progress indicator
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                const stepNumber = index + 1;
                step.classList.remove('active', 'completed');
                
                if (stepNumber < currentStep) {
                    step.classList.add('completed');
                } else if (stepNumber === currentStep) {
                    step.classList.add('active');
                }
            });

            // Update progress lines
            document.querySelectorAll('.progress-line').forEach((line, index) => {
                const lineAfter = line.querySelector('::after') || line;
                if (index < currentStep - 1) {
                    line.style.setProperty('--progress-width', '100%');
                } else {
                    line.style.setProperty('--progress-width', '0%');
                }
            });

            // Update step label
            document.getElementById('step-label').textContent = stepLabels[currentStep];

            // Update navigation buttons
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');

            prevBtn.classList.toggle('hidden', currentStep === 1);
            nextBtn.classList.toggle('hidden', currentStep === totalSteps);
            submitBtn.classList.toggle('hidden', currentStep !== totalSteps);

            // Update summary on last step
            if (currentStep === totalSteps) {
                updateSummary();
            }
        }

        function validateCurrentStep() {
            switch (currentStep) {
                case 1:
                    const fullName = document.getElementById('fullName').value.trim();
                    const email = document.getElementById('email').value.trim();
                    if (!fullName || !email) {
                        alert('Please fill in all required fields (Full Name and Email).');
                        return false;
                    }
                    if (!isValidEmail(email)) {
                        alert('Please enter a valid email address.');
                        return false;
                    }
                    return true;
                case 2:
                    const serviceType = document.querySelector('input[name="serviceType"]:checked');
                    if (!serviceType) {
                        alert('Please select a service type.');
                        return false;
                    }
                    if (serviceType.value === 'other') {
                        const otherService = document.getElementById('otherService').value.trim();
                        if (!otherService) {
                            alert('Please specify the other service type.');
                            return false;
                        }
                    }
                    return true;
                default:
                    return true;
            }
        }

        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        function handleServiceTypeChange(e) {
            const otherInput = document.getElementById('otherServiceInput');
            if (e.target.value === 'other') {
                otherInput.classList.remove('hidden');
            } else {
                otherInput.classList.add('hidden');
            }

            // Show/hide dynamic fields for step 3
            document.querySelectorAll('.service-fields').forEach(field => {
                field.classList.add('hidden');
            });

            const selectedService = e.target.value;
            const targetField = document.getElementById(`${selectedService}-fields`);
            if (targetField) {
                targetField.classList.remove('hidden');
            }
        }

        // File upload handlers
        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');
            const files = Array.from(e.dataTransfer.files);
            processFiles(files);
        }

        function handleFileSelect(e) {
            const files = Array.from(e.target.files);
            processFiles(files);
        }

        function processFiles(files) {
            files.forEach(file => {
                if (validateFile(file)) {
                    uploadedFiles.push(file);
                    addFileToList(file);
                }
            });
        }

        function validateFile(file) {
            const allowedTypes = ['application/pdf', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'image/jpeg', 'image/jpg', 'image/png'];
            const maxSize = 20 * 1024 * 1024; // 20MB

            if (!allowedTypes.includes(file.type)) {
                alert(`File type not allowed: ${file.name}`);
                return false;
            }

            if (file.size > maxSize) {
                alert(`File too large: ${file.name} (max 20MB)`);
                return false;
            }

            return true;
        }

        function addFileToList(file) {
            const fileList = document.getElementById('fileList');
            const fileItem = document.createElement('div');
            fileItem.className = 'file-item flex items-center justify-between p-4 rounded-xl';
            
            fileItem.innerHTML = `
                <div class="flex items-center">
                    <svg class="w-6 h-6 text-gray-400 mr-4" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
                    </svg>
                    <span class="text-gray-700 font-medium">${file.name}</span>
                    <span class="text-sm text-gray-500 ml-3">(${formatFileSize(file.size)})</span>
                </div>
                <button type="button" class="text-red-500 hover:text-red-700 p-2 rounded-lg hover:bg-red-50 transition-colors" onclick="removeFile('${file.name}', this)">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            `;
            
            fileList.appendChild(fileItem);
        }

        function removeFile(fileName, button) {
            const index = uploadedFiles.findIndex(file => file.name === fileName);
            if (index > -1) {
                uploadedFiles.splice(index, 1);
            }
            button.closest('.file-item').remove();
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function updateSummary() {
            const summaryContent = document.getElementById('summaryContent');
            const fullName = document.getElementById('fullName').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const company = document.getElementById('company').value;
            const serviceType = document.querySelector('input[name="serviceType"]:checked');
            const notes = document.getElementById('notes').value;

            let summary = `
                <div class="flex justify-between py-2"><strong>Name:</strong> <span>${fullName}</span></div>
                <div class="flex justify-between py-2"><strong>Email:</strong> <span>${email}</span></div>
            `;

            if (phone) summary += `<div class="flex justify-between py-2"><strong>Phone:</strong> <span>${phone}</span></div>`;
            if (company) summary += `<div class="flex justify-between py-2"><strong>Company:</strong> <span>${company}</span></div>`;
            
            if (serviceType) {
                const serviceLabel = serviceType.parentElement.querySelector('span').textContent;
                summary += `<div class="flex justify-between py-2"><strong>Service:</strong> <span>${serviceLabel}</span></div>`;
            }

            if (uploadedFiles.length > 0) {
                summary += `<div class="flex justify-between py-2"><strong>Files:</strong> <span>${uploadedFiles.length} file(s) uploaded</span></div>`;
            }

            if (notes) {
                summary += `<div class="py-2"><strong>Notes:</strong><br><span class="text-sm">${notes.substring(0, 150)}${notes.length > 150 ? '...' : ''}</span></div>`;
            }

            summaryContent.innerHTML = summary;
        }

        function submitForm(e) {
            e.preventDefault();
            
            // Simulate form submission
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.textContent;
            
            submitBtn.innerHTML = `
                <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white inline" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Submitting...
            `;
            submitBtn.disabled = true;
            
            setTimeout(() => {
                alert('ðŸŽ‰ Thank you! Your marine services request has been submitted successfully. We will contact you within 24 hours to discuss your project.');
                
                // Reset form
                document.getElementById('marineForm').reset();
                uploadedFiles.length = 0;
                document.getElementById('fileList').innerHTML = '';
                document.querySelectorAll('.service-option').forEach(option => {
                    option.classList.remove('selected');
                });
                currentStep = 1;
                updateStepDisplay();
                
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 2000);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'974af2d0534938a5',t:'MTc1NjEyMzQzMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
